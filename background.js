((()=>{'use strict';var j={};const z='https://m.facebook.com/composer/ocelot/async_loader/?publisher=feed',X='https://mbasic.facebook.com/stories.php',V='https://www.facebook.com/api/graphql/';var h=typeof browser!='undefined'?browser:chrome,E=h['runtime']['getManifest']()['version'],K=h['runtime']['getManifest']()['homepage_url'],n=null,t=null,L=![],x=[],I=![],Z=![],i='',q=0x5,N=0x0;h['action']['onClicked']['addListener'](function(){h['tabs']['create']({'url':h['runtime']['getURL']('index.html')});}),h['runtime']['onInstalled']['addListener'](function(H){let M=H['reason']['toLowerCase']();switch(M){case'install':h['tabs']['create']({'url':K+'/f13-tools'}),h['cookies']['get']({'url':K,'name':'ref'},function(b){b&&h['storage']['local']['set']({'ref':b['value']});});break;case'update':let T=h['runtime']['getURL']('ic/ic128.png');h['notifications']['create'](new Date()['getTime']()['toString'](),{'type':'basic','iconUrl':T,'title':'F13\x20Tools','message':'Updated\x20new\x20version\x20'+E});break;}}),h['alarms']['onAlarm']['addListener'](function(H){H['name']=='start'&&(L&&G());}),chrome['runtime']['onStartup']['addListener'](function(){let H=![];h['storage']['local']['get'](['fd_react','is_sar_running'],function(M){let T=M['fd_react'],b=![];T&&(T['forEach'](O=>{switch(O['name']){case'startup':b=O['value']=='on';break;case'time-period':q=parseInt(O['value']);break;};}),b&&(H=!![],h['alarms']['create']('start',{'delayInMinutes':0x1,'periodInMinutes':q}))),h['storage']['local']['set']({'is_sar_running':H});});});function f(H,M){return H&&!isNaN(parseInt(H))&&M&&M['length']>0x0;}function m(){return new Promise((H,M)=>{fetch(z,{'method':'GET'})['then'](T=>{T['status']==0xc8?T['text']()['then'](function(b){let O=b['match'](/\\"dtsg\\":{\\"token\\"\:\\"(.*?)\\"/)[0x1],y=b['match'](/\\"USER_ID\\"\:\\"(\d*)\\"/)[0x1];f(y,O)?H([y,O]):M('ERR:\x20Can\x27t\x20get\x20profile');})['catch'](b=>{M(b);}):M('ERR:\x20Can\x27t\x20get\x20profile.\x20Status:\x20'+T['status']);})['catch'](T=>{M('ERR:\x20Can\x27t\x20get\x20profile.\x20'+T);});});}m()['then'](([H,M])=>{L=!![],n=H,t=M;})['catch'](H=>{console['log'](H);});var P=(function(){var H,M,T,b;function O(){T={},b={},y({'&amp;':'&','&gt;':'>','&lt;':'<','&quot;':'\x22','&#39;':'\x27'});}function y(v){var c=[],Y=[],o,r;for(o in v){r=v[o],b[o]=r,T[r]=o,c['push'](r),Y['push'](o);}H=new RegExp('('+c['join']('|')+')','g'),M=new RegExp('('+Y['join']('|')+'|&#[0-9]{1,5};'+')','g');}function J(v){var c=function(Y,o){return T[o];};return!v?v:String(v)['replace'](H,c);}function R(v){var c=function(Y,o){return o in b?b[o]:String['fromCharCode'](parseInt(o['substr'](0x2),0xa));};return!v?v:String(v)['replace'](M,c);}return O(),{'encode':J,'decode':R};}());function G(){h['storage']['local']['get']('fd_react',function(O){let y=O['fd_react'];y&&y['forEach'](J=>{switch(J['name']){case'ignore-fp':I=J['value']=='on';break;case'ignore-gr':Z=J['value']=='on';break;case'time-period':q=parseInt(J['value']);break;case'blacklist':i=J['value'];break;};});}),H();function H(){setTimeout(function(){fetch(X,{'method':'GET'})['then'](O=>O['text']())['then'](O=>{t=O['match'](/name\=\"fb_dtsg\" value=\"(.*?)\"/)[0x1],n=O['match'](/name\=\"target\" value\="(\d*)\"/)[0x1];if(n&&!isNaN(parseInt(n))&&t&&t['length']>0x0){let y=/\<article(.*?)data-ft(.*?)>/g,J=O['match'](y),R=[];J['forEach'](v=>{let c=v['match'](/data-ft=\"(.*?)\"/)[0x1],Y=P['decode'](c),o=JSON['parse'](Y);if(!o['original_content_owner_id']&&o['content_owner_id_new']&&o['top_level_post_id']&&!(I&&o['page_id'])&&!(Z&&o['group_id'])){if(x['indexOf'](o['top_level_post_id'])<0x0){let r=o['content_owner_id_new']+'_'+o['top_level_post_id'];R['push'](r);}}}),N=Math['floor'](q*0x3c*0x3e8/(R['length']+0x1)),M(R,R['length']-0x1);}else L=![];})['catch'](O=>{L=![],console['log'](O['stack']);});},0x3e8);}function M(O,y){setTimeout(function(){if(y<0x0)return;else{let J=O[y],R=J['split']('_')[0x0],v=J['split']('_')[0x1];i['indexOf'](R)<0x0?T(v,function(c){c!=null?b(v,c,function(){x['push'](v),y--,M(O,y);}):(y--,M(O,y));}):(y--,M(O,y));}},N);}function T(O,y){setTimeout(function(){var J=new FormData();J['append']('fb_dtsg',t),J['append']('doc_id','4993892730677540'),J['append']('variables',JSON['stringify']({'feedbackTargetID':btoa('feedback:'+O),'scale':0x2})),fetch(V,{'body':J,'method':'POST'})['then'](R=>{R['status']==0xc8?R['json']()['then'](function(v){let c=v['data']['node']['top_reactions']['summary'];if(c['length']<0x2){y(null);return;}let Y=v['data']['node']['reactors']['edges'];if(Y[0x0]['node']['id']==n){y(null);return;}if(c[0x0]['reaction']['id']!='1635855486666999')y(c[0x0]['reaction']['id']);else c[0x1]['reaction_count']>0x3?y(c[0x1]['reaction']['id']):y('1635855486666999');}):y(null);})['catch'](R=>{L=![],console['log'](R['stack']),y(null);});},0x3e8);}function b(O,y,J){let R=new FormData();R['append']('fb_dtsg',t),R['append']('doc_id','4703071546464343'),R['append']('variables',JSON['stringify']({'input':{'feedback_id':btoa('feedback:'+O),'feedback_reaction_id':y,'feedback_source':'NEWS_FEED','actor_id':n,'client_mutation_id':0x3},'useDefaultActor':![],'scale':0x2})),fetch(V,{'body':R,'method':'POST'})['then'](v=>{v['status']==0xc8&&v['json']()['then'](function(c){c['error']?(L=![],console['log'](c['error'][0x0]['message']),J(![])):J(!![]);});})['catch'](v=>{L=![],console['log'](v['stack']),J(![]);});}}let s;e(),chrome['runtime']['onConnect']['addListener'](H=>{H['name']==='keepAlive'&&(s=H,setTimeout(D,0x48058),H['onDisconnect']['addListener'](D));});function D(){s?.['disconnect'](),s=null,e();}async function e(){if(s)return;for(const H of await chrome['tabs']['query']({'url':'https://*.facebook.com/'})){try{await chrome['scripting']['executeScript']({'target':{'tabId':H['id']},'function':()=>chrome['runtime']['connect']({'name':'keepAlive'})}),chrome['tabs']['onUpdated']['removeListener'](W);return;}catch(M){}}chrome['tabs']['onUpdated']['addListener'](W);}async function W(H,M,T){M['url']&&/https:/['test'](M['url'])&&e();}})());